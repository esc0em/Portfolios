const n=`# AUTOKING — бот студии детейлинга\r
\r
## Описание проекта\r
\r
AUTOKING — Telegram-бот для студии детейлинга. Клиенты записываются на услуги через бота: выбирают услугу, дату и время, оставляют имя и телефон. Бот ведёт каталог услуг с прайсами по классам авто, интегрирован с Google Calendar и Google Таблицами, отправляет короткие SMS-напоминания за 24 часа и за 2 часа до визита. Админ-панель реализована на кнопках: просмотр и управление бронированиями, блокировка слотов.\r
\r
## Основной функционал\r
\r
### 1. Запись на услугу\r
\r
- Выбор услуги из списка (бронирование плёнкой, тонировка, полировка/керамика/химчистка, антихром, цветной полиуретан, брендирование и др.).\r
- Для части услуг — уточнение категории (например, химчистка: полная, потолок, сиденья и т.д.) с прайсом по классу авто (седан, паркетник, джип/минивэн).\r
- Выбор даты из доступных дней (до 5 дней вперёд) и времени из свободных слотов (рабочий день 10:00–20:00, слот 1 час).\r
- Ввод имени и телефона; опционально — согласие на SMS-напоминание.\r
- Подтверждение записи; создание события в Google Calendar и строки в Google Таблице.\r
\r
### 2. Моя запись\r
\r
Просмотр текущей записи пользователя: услуга, дата и время, возможность отменить запись (с удалением события в календаре).\r
\r
### 3. Услуги и цены\r
\r
- Каталог категорий: бронирование плёнкой, тонировка, полировка/керамика/химчистка, антихром, цветной полиуретан, брендирование, химчистка (прайс), комплексная мойка (прайс).\r
- Описания с ориентировочными ценами; для прайсов — выбор класса авто и вывод таблицы цен по услугам (с разбивкой на части при длинном тексте для лимитов Telegram).\r
\r
### 4. Контакты и карты\r
\r
Адрес студии, телефон, кнопки с ссылками на маршрут: Google Maps, Яндекс.Карты, 2ГИС.\r
\r
### 5. Админ-панель\r
\r
- Доступ по списку Telegram ID администраторов.\r
- Просмотр бронирований, отмена записей (с удалением события в календаре).\r
- Создание записи от имени клиента (имя, телефон, услуга, дата/время).\r
- Блокировка слотов по дате и времени (отдельная таблица blocked_slots).\r
\r
### 6. Напоминания по SMS\r
\r
- APScheduler: проверка предстоящих визитов.\r
- За 24 часа и за 2 часа до визита — отправка короткого SMS (≤40 символов) через SMS.Ru с датой и временем записи.\r
\r
## Технические решения\r
\r
### Стек\r
\r
- **Python** — основной язык.\r
- **aiogram 3.x** — Telegram Bot API, FSM, клавиатуры.\r
- **SQLite** — хранение бронирований и заблокированных слотов (WAL, индексы, миграции колонок).\r
- **Google Sheets API** — добавление заявки в таблицу (дата создания, имя, телефон, услуга, дата/время визита, TG ID).\r
- **Google Calendar API** — создание и удаление событий бронирований (слот 1 час, локальный часовой пояс).\r
- **APScheduler** — отложенные задачи для SMS-напоминаний.\r
- **SMS.Ru** (requests) — отправка SMS.\r
\r
### База данных\r
\r
**bookings** — бронирования:\r
- id, user_id, service, datetime_text, visit_at_machine, client_name, phone, notify_sms, created_by_admin, calendar_event_id, created_at, canceled, reminded_24h, reminded_2h.\r
\r
**blocked_slots** — заблокированные слоты:\r
- date_iso, time_hm (UNIQUE).\r
\r
Индексы по часто используемым полям (canceled, visit_at_machine; user_id, canceled; date_iso, time_hm). При добавлении новых колонок в конфигурации выполняется миграция через PRAGMA table_info и ALTER TABLE.\r
\r
### FSM\r
\r
- **BookingForm** — цепочка состояний записи: выбор услуги (и при необходимости категории/пункта прайса), даты, времени, имени, телефона, канала напоминания.\r
- **AdminBlock** — блокировка слотов (ввод даты).\r
\r
### Интеграции\r
\r
- При создании бронирования: запись в SQLite, создание события в Google Calendar, добавление строки в Google Таблицу.\r
- При отмене: обновление/отметка в БД, удаление события из календаря.\r
- Напоминания: выборка предстоящих визитов из БД, отправка SMS, проставление флагов reminded_24h / reminded_2h.\r
\r
## Особенности реализации\r
\r
1. **Короткие SMS**: текст до 40 символов для совместимости с тарифами и правилами SMS.Ru.\r
2. **Локальное время**: все слоты и напоминания в часовом поясе студии (настраивается в конфиге).\r
3. **Свободные слоты**: учёт существующих бронирований и заблокированных слотов; для текущего дня — только будущие часы.\r
4. **Админ-панель на кнопках**: без отдельного веб-интерфейса, всё управление в Telegram.\r
\r
## Результаты\r
\r
- Автоматизация записи на услуги детейлинга без звонков.\r
- Меньше пропусков визитов за счёт напоминаний за 24 ч и за 2 ч.\r
- Единый календарь и таблица заявок для студии.\r
- 8+ категорий услуг, 3 внешние интеграции (Calendar, Sheets, SMS).\r
`;export{n as default};
